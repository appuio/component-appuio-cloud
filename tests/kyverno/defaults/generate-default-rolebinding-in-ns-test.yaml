name: test default RoleBinding generation
policies:
  - compiled/appuio-cloud/appuio-cloud/10_generate_default_rolebinding_in_ns.yaml
resources:
  - generate-default-rolebinding-in-ns/uninit-rolebinding.yaml
variables: generate-default-rolebinding-in-ns-variables.yaml
results:
  - policy: default-rolebinding-in-ns
    rule: patch-uninitialized-default-rolebinding
    resource: admin
    namespace: org-namespace
    kind: RoleBinding
    result: skip
    patchedResource: generate-default-rolebinding-in-ns/uninit-rolebinding-patched.yaml
  - policy: default-rolebinding-in-ns
    rule: patch-uninitialized-default-rolebinding
    resource: admin
    namespace: org-project
    kind: RoleBinding
    result: pass
    patchedResource: generate-default-rolebinding-in-ns/uninit-rolebinding-patched.yaml
